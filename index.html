<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Harsh Patel</title>
<script src="https://kit.fontawesome.com/37263448cf.js" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
<!-- Markdown parser -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<!-- LaTeX renderer -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- Syntax highlighting -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
<!-- Article content files -->
<script src="research/synthetic-data-generation.js"></script>
<script src="research/point-cloud-processing.js"></script>
<script src="research/procedural-generation-frameworks.js"></script>
<!-- Notes content files -->
<script src="notes/the-art-of-diffusion.js"></script>
<!-- Ideas content files -->
<script src="ideas/distribution-of-light-through-medium.js"></script>
<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<style>
    :root {
        /* Tokyo Night Dark Theme */
        --bg-color: #1a1b26;
        --bg-secondary: #24283b;
        --text-color: #c0caf5;
        --text-secondary: #9aa5ce;
        --header-color: #7aa2f7;
        --accent-pink: #ff7a93;
        --accent-cyan: #7dcfff;
        --accent-green: #9ece6a;
        --tile-bg: #292e42;
        --nav-bg: #16161e;
        --border-color: #414868;
        --subtle-border: #2a2e42;
    }
    
    /* CSS Reset */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    html {
        height: 100%;
        overscroll-behavior: none;
        overscroll-behavior-y: none;
        overscroll-behavior-x: none;
        -webkit-overflow-scrolling: auto;
    }
    
    body {
        font-family: 'Montserrat', sans-serif;
        line-height: 1.6;
        color: var(--text-color);
        background-color: var(--bg-color);
        min-height: 100vh;
        overflow-x: hidden;
        height: auto;
        overflow-y: auto;
        border: 6px solid var(--header-color);
        box-sizing: border-box;
        overscroll-behavior: none;
        overscroll-behavior-y: none;
        overscroll-behavior-x: none;
        -webkit-overflow-scrolling: auto;
    }
    
    /* Navigation */
    .nav-header {
        background-color: var(--nav-bg);
        padding: 0;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3);
        position: sticky;
        top: 0;
        z-index: 1000;
        height: 84px;
        backdrop-filter: blur(10px);
    }
    
    .nav-container {
        max-width: 100%;
        margin: 0 auto;
        display: flex;
        justify-content: center;
        align-items: stretch;
        padding: 0;
        height: 100%;
        width: 100%;
    }
    
    .nav-menu {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 6px;
        width: 100%;
        height: 100%;
        background-color: var(--header-color);
    }
    
    .nav-item {
        position: relative;
        flex: 1;
        height: 100%;
    }
    
    .nav-link {
        color: var(--text-color);
        text-decoration: none;
        padding: 2rem 1.5rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 2px;
        transition: all 0.3s ease;
        background-color: var(--bg-secondary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.9rem;
        position: relative;
        overflow: hidden;
        height: 100%;
        border: none;
    }
    
    .nav-link::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, var(--header-color), var(--accent-cyan));
        transition: left 0.5s ease;
        z-index: 1;
    }
    
    .nav-link span {
        position: relative;
        z-index: 2;
    }
    
    .nav-link:hover {
        color: white;
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(122, 162, 247, 0.3);
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    
    .nav-link:hover::before {
        left: 0;
    }
    
    .nav-link.active {
        color: white;
        font-weight: 800;
        background-color: var(--bg-secondary);
        box-shadow: none;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
    }
    
    /* Main Content */
    .main-content {
        max-width: 100%;
        margin: 0;
        padding: 0;
        height: calc(100vh - 102px);
        overflow: hidden;
    }
    
    .content-section {
        display: none;
        height: calc(100vh - 102px);
        margin: 0;
        padding: 0;
        overflow: hidden;
    }
    
    .content-section.active {
        display: block;
    }
    
    /* Home Layout */
    .home-layout {
        display: grid;
        grid-template-columns: 1fr 6px 1fr;
        gap: 0;
        height: calc(100vh - 102px);
        margin: 0;
        padding: 0;
    }
    
    .vertical-divider {
        background: var(--header-color);
        width: 6px;
        position: relative;
    }
    
    /* Hero Section */
    .hero-section {
        background-color: var(--bg-color);
        padding: 1.5rem 3rem;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        overflow: hidden;
        position: relative;
    }
    
    .hero-content {
        text-align: center;
        max-width: 650px;
        position: relative;
        z-index: 2;
    }
    
    .hero-title {
        font-size: 4.2rem;
        font-weight: 800;
        margin-bottom: 1.5rem;
        text-transform: uppercase;
        letter-spacing: 4px;
        background: linear-gradient(45deg, var(--header-color), var(--accent-pink));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1.0;
        filter: drop-shadow(0 0 15px rgba(122, 162, 247, 0.7));
    }
    
    .hero-subtitle {
        font-size: 1.2rem;
        color: var(--text-secondary);
        margin-bottom: 2rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 2px;
        line-height: 1.4;
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .hero-description {
        font-size: 1.4rem;
        color: var(--text-color);
        line-height: 1.8;
        font-weight: 500;
        max-width: 550px;
        margin: 0 auto;
        text-align: center;
    }
    
    .hero-description p {
        margin-bottom: 1rem;
        font-size: 1.4rem;
        transition: transform 0.3s ease;
    }
    
    .hero-description p:hover {
        transform: scale(1.02);
    }
    
    .hero-description strong {
        color: var(--header-color);
        font-weight: 700;
        text-shadow: 0 0 10px rgba(122, 162, 247, 0.3);
    }
    
    /* Contact Section */
    .contact-section {
        background-color: var(--tile-bg);
        display: flex;
        flex-direction: column;
        height: 100%;
        overflow: hidden;
        position: relative;
    }
    
    .contact-header {
        background: transparent;
        color: var(--text-color);
        padding: 1.75rem 2.5rem 1rem 2.5rem;
        text-align: center;
        position: relative;
        overflow: hidden;
    }
    
    .contact-title {
        font-size: 4.2rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 4px;
        margin: 0;
        position: relative;
        z-index: 2;
        color: var(--header-color);
        text-shadow: 0 0 15px rgba(122, 162, 247, 0.4);
        filter: drop-shadow(0 0 15px rgba(122, 162, 247, 0.7));
        line-height: 1.0;
    }
    
    .contact-content {
        padding: 1.5rem 2.5rem 1rem 2.5rem;
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        overflow-y: auto;
        position: relative;
        z-index: 2;
    }
    
    .form-group {
        margin-bottom: 0.8rem;
        position: relative;
    }
    
    .form-label {
        display: block;
        color: var(--text-secondary);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 0.6rem;
        font-size: 0.85rem;
        transition: all 0.3s ease;
    }
    
    .form-control {
        width: 100%;
        padding: 1rem;
        border: 2px solid var(--border-color);
        background-color: var(--bg-secondary);
        color: var(--text-color);
        font-size: 0.9rem;
        transition: all 0.3s ease;
        font-family: 'Montserrat', sans-serif;
        border-radius: 2px;
        position: relative;
        font-weight: 500;
    }
    
    .form-control::placeholder {
        color: var(--text-secondary);
        opacity: 0.8;
    }
    
    .form-control:focus {
        outline: none;
        border-color: var(--accent-cyan);
        background-color: var(--bg-color);
        box-shadow: 0 4px 15px rgba(122, 162, 247, 0.3);
        transform: translateY(-2px);
    }
    
    .form-group:hover .form-label {
        color: white;
        transform: translateX(2px);
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    
    .submit-btn {
        width: 100%;
        padding: 1rem;
        background: transparent;
        color: var(--header-color);
        border: 2px solid var(--header-color);
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 1rem;
        border-radius: 2px;
        position: relative;
        overflow: hidden;
    }
    
    .submit-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, var(--header-color), var(--accent-cyan));
        transition: left 0.5s ease;
        z-index: 1;
    }
    
    .submit-btn span {
        position: relative;
        z-index: 2;
    }
    
    .submit-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(122, 162, 247, 0.4);
        color: white;
        border-color: var(--accent-cyan);
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    
    .submit-btn:hover::before {
        left: 0;
    }
    
    .submit-btn:active {
        transform: translateY(0);
    }
    
    .social-section {
        text-align: center;
        margin-top: 1.2rem;
    }
    
    .social-grid {
        display: flex;
        justify-content: center;
        gap: 1.5rem;
    }
    
    .social-item {
        background-color: var(--bg-secondary);
        border: 2px solid var(--header-color);
        padding: 1rem;
        text-decoration: none;
        color: var(--text-color);
        transition: all 0.3s ease;
        text-align: center;
        width: 65px;
        height: 65px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 2px;
        position: relative;
        overflow: hidden;
    }
    
    .social-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, var(--header-color), var(--accent-cyan));
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    
    .social-item:hover {
        border-color: var(--accent-cyan);
        color: white;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(122, 162, 247, 0.3);
    }
    
    .social-item:hover::before {
        opacity: 1;
    }
    
    .social-icon {
        font-size: 1.6rem;
        color: var(--header-color);
        position: relative;
        z-index: 2;
        transition: all 0.3s ease;
    }
    
    .social-item:hover .social-icon {
        color: white;
        transform: scale(1.1);
    }
    
    /* Notification */
    #notification {
        position: fixed;
        bottom: -100px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(45deg, var(--accent-green), var(--accent-cyan));
        color: white;
        padding: 1rem 2rem;
        transition: bottom 0.3s ease;
        cursor: pointer;
        display: none;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-size: 0.9rem;
        z-index: 9999;
        border-radius: 4px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        border: 1px solid var(--accent-cyan);
        backdrop-filter: blur(10px);
    }
    
    #notification.show {
        display: block;
        bottom: 20px;
    }
    
    /* Research Header */
    .research-header {
        background-color: var(--bg-secondary);
        padding: 2rem 3rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        width: 100%;
        box-sizing: border-box;
    }
    
    .research-description {
        font-size: 1.2rem;
        color: var(--text-secondary);
        margin: 0;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 2px;
        line-height: 1.4;
        max-width: 100%;
        margin-left: auto;
        margin-right: auto;
    }

    /* Articles Container */
    .articles-container {
        height: calc(100vh - 150px);
        overflow-y: auto;
        overflow-x: hidden;
        background-color: var(--header-color);
        padding: 0 0 50px 0;
        margin: 0;
        overscroll-behavior: none;
        overscroll-behavior-y: none;
        -webkit-overflow-scrolling: auto;
        scroll-behavior: auto;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        scroll-snap-type: y mandatory;
    }

    /* Hide Scrollbar */
    .articles-container::-webkit-scrollbar {
        display: none;
    }

    .articles-container {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    
    /* Articles Grid */
    .articles-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 6px;
        background-color: var(--header-color);
        padding: 0;
        width: 100%;
        margin: 0;
    }
    
    .article-block {
        background-color: var(--bg-color);
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        height: calc((100vh - 200px - 12px) / 3);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
        box-sizing: border-box;
        scroll-snap-align: start;
    }
    
    .article-block:hover {
        background-color: var(--bg-secondary);
    }
    
    .article-title {
        color: var(--text-color);
        font-size: 1.2rem;
        font-weight: 700;
        margin: 0;
        line-height: 1.3;
        transition: all 0.3s ease;
        text-align: center;
        max-width: 100%;
    }
    
    .article-block:hover .article-title {
        color: white;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 
                     0 0 40px rgba(255, 255, 255, 0.6),
                     0 0 60px rgba(255, 255, 255, 0.4);
        transform: scale(1.05);
    }

    /* Filler blocks */
    .article-filler {
        background-color: var(--bg-color);
        height: calc((100vh - 200px - 12px) / 3);
        cursor: default;
        box-sizing: border-box;
        position: relative;
        background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 10px,
            rgba(154, 165, 206, 0.1) 10px,
            rgba(154, 165, 206, 0.1) 20px
        );
        scroll-snap-align: start;
    }

    .article-filler::before {
        content: 'ðŸš§';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2rem;
        opacity: 0.3;
        pointer-events: none;
    }

    /* Notes Section - 2x2 Grid */
    .notes-container {
        height: calc(100vh - 150px);
        overflow-y: auto;
        overflow-x: hidden;
        background-color: var(--header-color);
        padding: 0 0 50px 0;
        margin: 0;
        overscroll-behavior: none;
        overscroll-behavior-y: none;
        -webkit-overflow-scrolling: auto;
        scroll-behavior: auto;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        scroll-snap-type: y mandatory;
    }

    /* Hide Notes Container Scrollbar */
    .notes-container::-webkit-scrollbar {
        display: none;
    }

    .notes-container {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .notes-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 6px;
        background-color: var(--header-color);
        padding: 0;
        width: 100%;
        margin: 0;
        height: 100%;
    }

    .note-category-block {
        background-color: var(--bg-color);
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        height: calc((100vh - 200px - 6px) / 2);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 3rem;
        box-sizing: border-box;
        scroll-snap-align: start;
    }

    .note-category-block:hover {
        background-color: var(--bg-secondary);
    }

    .note-category-title {
        color: var(--text-color);
        font-size: 1.8rem;
        font-weight: 700;
        margin: 0;
        line-height: 1.3;
        transition: all 0.3s ease;
        text-align: center;
        max-width: 100%;
    }

    .note-category-block:hover .note-category-title {
        color: white;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 
                     0 0 40px rgba(255, 255, 255, 0.6),
                     0 0 60px rgba(255, 255, 255, 0.4);
        transform: scale(1.05);
    }

    /* Horizontal Divider */
    .horizontal-divider {
        background: var(--header-color);
        height: 6px;
        width: 100%;
        position: relative;
    }

    /* Article Page */
    .article-page {
        display: flex;
        flex-direction: column;
        height: calc(100vh - 102px);
        overflow: hidden;
    }

    /* Article Secondary Navigation */
    .article-nav {
        background-color: var(--bg-secondary);
        border-bottom: 2px solid var(--header-color);
        padding: 1rem 2rem;
        display: flex;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1001;
        min-height: 70px;
        gap: 1rem;
    }

    /* Notes Category Navigation */
    .notes-category-nav {
        background-color: var(--bg-secondary);
        border-bottom: 2px solid var(--header-color);
        padding: 2rem 3rem;
        display: flex;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1001;
        gap: 1rem;
    }

    .notes-category-title-nav {
        color: var(--header-color);
        font-size: 1.6rem;
        font-weight: 800;
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        text-align: center;
        text-shadow: 0 0 15px rgba(122, 162, 247, 0.4);
        filter: drop-shadow(0 0 15px rgba(122, 162, 247, 0.7));
        padding-left: 20px;
        padding-right: 20px;
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .article-nav h2 {
        color: var(--header-color);
        font-size: 1.6rem;
        font-weight: 800;
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        text-align: center;
        text-shadow: 0 0 15px rgba(122, 162, 247, 0.4);
        filter: drop-shadow(0 0 15px rgba(122, 162, 247, 0.7));
        padding-left: 20px;
        padding-right: 20px;
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .back-btn {
        background-color: var(--bg-secondary);
        border: 2px solid var(--header-color);
        color: var(--header-color);
        font-size: 1.2rem;
        cursor: pointer;
        padding: 0.6rem;
        border-radius: 4px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 45px;
        height: 45px;
        flex-shrink: 0;
        order: -1;
        position: relative;
        overflow: hidden;
    }

    .back-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, var(--header-color), var(--accent-cyan));
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .back-btn i {
        position: relative;
        z-index: 2;
    }

    .back-btn:hover {
        border-color: var(--accent-cyan);
        color: white;
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(122, 162, 247, 0.3);
    }

    .back-btn:hover::before {
        opacity: 1;
    }

    .back-btn:active {
        transform: translateY(0);
    }

    /* Article Content Container */
    .article-container {
        flex: 1;
        overflow-y: auto;
        background-color: var(--bg-color);
        padding: 0;
    }

    /* Hide Article Container Scrollbar */
    .article-container::-webkit-scrollbar {
        display: none;
    }

    .article-container {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .article-body {
        padding: 0rem 3rem 3rem 3rem;
        color: var(--text-color);
        line-height: 1.8;
        width: 100%;
        background-color: var(--bg-color);
        min-height: 100%;
        opacity: 0;
        animation: fadeInArticle 0.5s ease-in-out forwards;
    }

    @keyframes fadeInArticle {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Markdown Styling */
    .article-body h1,
    .article-body h2,
    .article-body h3,
    .article-body h4,
    .article-body h5,
    .article-body h6 {
        color: var(--header-color);
        margin-top: 2rem;
        margin-bottom: 1rem;
        font-weight: 700;
    }

    .article-body h1 {
        font-size: 2.2rem;
        border-bottom: 2px solid var(--header-color);
        padding-bottom: 0.5rem;
    }

    .article-body h2 {
        font-size: 1.8rem;
        border-bottom: 1px solid var(--subtle-border);
        padding-bottom: 0.3rem;
    }

    .article-body h3 {
        font-size: 1.4rem;
    }

    .article-body p {
        margin-bottom: 1rem;
        color: var(--text-color);
    }

    .article-body ul,
    .article-body ol {
        margin-left: 2rem;
        margin-bottom: 1rem;
    }

    .article-body li {
        margin-bottom: 0.5rem;
        color: var(--text-color);
    }

    .article-body blockquote {
        border-left: 4px solid var(--header-color);
        padding-left: 1rem;
        margin: 1rem 0;
        font-style: italic;
        color: var(--text-secondary);
        background-color: var(--bg-secondary);
        padding: 1rem;
        border-radius: 4px;
    }

    .article-body code {
        background-color: var(--bg-secondary);
        padding: 0.2rem 0.4rem;
        border-radius: 4px;
        font-family: 'Courier New', monospace;
        color: var(--accent-cyan);
        font-size: 0.9rem;
    }

    .article-body pre {
        background-color: var(--bg-secondary);
        padding: 1rem;
        border-radius: 8px;
        overflow-x: auto;
        margin: 1rem 0;
        border: 1px solid var(--subtle-border);
        position: relative;
    }

    .article-body pre code {
        background: none;
        padding: 0;
        color: var(--text-color);
        font-family: 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 0.9rem;
        line-height: 1.5;
    }

    /* Highlight.js theme adjustments for better integration */
    .hljs {
        background: var(--bg-secondary) !important;
        color: var(--text-color) !important;
        padding: 0 !important;
    }

    /* Enhanced code block language indicator */
    .article-body pre::before {
        content: attr(data-language);
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
        font-size: 0.7rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        font-weight: 600;
        letter-spacing: 0.5px;
        background-color: rgba(0, 0, 0, 0.2);
        padding: 0.2rem 0.4rem;
        border-radius: 3px;
        transition: all 0.2s ease;
    }

    .article-body pre:hover::before {
        background-color: rgba(0, 0, 0, 0.4);
        transform: scale(1.05);
    }

    .article-body pre[data-language="python"]::before {
        content: "Python";
        color: var(--accent-green);
        border: 1px solid var(--accent-green);
    }

    .article-body pre[data-language="javascript"]::before {
        content: "JavaScript";
        color: var(--accent-cyan);
        border: 1px solid var(--accent-cyan);
    }

    .article-body pre[data-language="bash"]::before {
        content: "Bash";
        color: var(--accent-pink);
        border: 1px solid var(--accent-pink);
    }

    .article-body pre[data-language="plaintext"]::before {
        content: "Code";
        color: var(--text-secondary);
        border: 1px solid var(--text-secondary);
    }

    /* Code blocks without hover effects */
    .article-body pre {
        position: relative;
    }

    /* Enhanced syntax highlighting integration */
    .article-body .hljs-keyword {
        color: #bb9af7 !important;
        font-weight: 600;
    }

    .article-body .hljs-string {
        color: #9ece6a !important;
    }

    .article-body .hljs-number {
        color: #ff9e64 !important;
    }

    .article-body .hljs-comment {
        color: #565f89 !important;
        font-style: italic;
    }

    .article-body .hljs-function {
        color: #7aa2f7 !important;
    }

    .article-body .hljs-class {
        color: #e0af68 !important;
        font-weight: 600;
    }

    /* Better scrollbar for code blocks */
    .article-body pre::-webkit-scrollbar {
        height: 8px;
    }

    .article-body pre::-webkit-scrollbar-track {
        background: var(--bg-color);
        border-radius: 4px;
    }

    .article-body pre::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 4px;
    }

    .article-body pre::-webkit-scrollbar-thumb:hover {
        background: var(--header-color);
    }

    .article-body a {
        color: var(--header-color);
        text-decoration: none;
        border-bottom: 1px solid transparent;
        transition: all 0.3s ease;
    }

    .article-body a:hover {
        border-bottom-color: var(--header-color);
    }

    .article-body strong {
        color: var(--header-color);
        font-weight: 700;
    }

    .article-body em {
        color: var(--accent-cyan);
        font-style: italic;
    }

    /* LaTeX Math Styling */
    .article-body .MathJax {
        color: var(--text-color) !important;
    }

    .article-body mjx-container {
        margin: 1rem 0;
        padding: 0.5rem;
        border-radius: 4px;
        background-color: rgba(122, 162, 247, 0.05);
        border: 1px solid rgba(122, 162, 247, 0.1);
    }

    .article-body mjx-container[display="true"] {
        margin: 1.5rem 0;
        padding: 1rem;
        text-align: center;
        background-color: rgba(122, 162, 247, 0.08);
        border: 1px solid rgba(122, 162, 247, 0.15);
    }

    /* Better inline code styling */
    .article-body p code,
    .article-body li code {
        background-color: rgba(122, 162, 247, 0.15);
        border: 1px solid rgba(122, 162, 247, 0.2);
        color: var(--header-color);
        font-weight: 600;
    }

    /* Loading Spinner */
    .loading-spinner {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 3rem;
        color: var(--header-color);
        font-size: 1.2rem;
    }

    .spinner {
        border: 3px solid var(--bg-secondary);
        border-top: 3px solid var(--header-color);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin-right: 1rem;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    /* Coming Soon Page */
    .coming-soon-page {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100%;
        background-color: var(--bg-color);
        text-align: center;
        padding: 2rem;
    }

    .coming-soon-title {
        font-size: 3rem;
        font-weight: 800;
        color: var(--header-color);
        margin-bottom: 1rem;
        text-transform: uppercase;
        letter-spacing: 3px;
        text-shadow: 0 0 15px rgba(122, 162, 247, 0.4);
        filter: drop-shadow(0 0 15px rgba(122, 162, 247, 0.7));
    }

    .coming-soon-text {
        font-size: 1.2rem;
        color: var(--text-secondary);
        max-width: 600px;
        line-height: 1.6;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
        body {
            height: auto;
            overflow-y: auto;
            border: 6px solid var(--header-color);
        }
        
        .nav-header {
            height: auto;
        }
        
        .nav-container {
            flex-direction: column;
            height: auto;
        }
        
        .nav-menu {
            flex-direction: column;
            height: auto;
            gap: 0;
            background-color: var(--nav-bg);
        }
        
        .nav-item {
            flex: none;
            height: auto;
        }
        
        .nav-link {
            text-align: center;
            border-bottom: 6px solid var(--header-color);
            padding: 1.2rem 1.5rem;
            height: auto;
        }
        
        .nav-link:last-child {
            border-bottom: none;
        }
        
        .nav-link::before {
            display: none;
        }
        
        .nav-link:hover {
            transform: none;
            box-shadow: none;
        }
        
        .main-content {
            height: auto;
            overflow: visible;
        }
        
        .content-section {
            height: auto;
            overflow: visible;
        }
        
        .home-layout {
            grid-template-columns: 1fr;
            height: auto;
        }
        
        .vertical-divider {
            display: none;
        }
        
        .hero-section {
            padding: 1.5rem 2rem;
            height: auto;
            overflow: visible;
            border-bottom: 6px solid var(--header-color);
        }
        
        .hero-title {
            font-size: 2.8rem;
            letter-spacing: 2px;
            line-height: 1.1;
            margin-bottom: 1rem;
        }
        
        .hero-subtitle {
            font-size: 1rem;
            letter-spacing: 1px;
            max-width: 400px;
            margin-bottom: 1.5rem;
        }
        
        .hero-description {
            font-size: 1.2rem;
            max-width: 380px;
            text-align: center;
        }
        
        .hero-description p {
            font-size: 1.2rem;
        }
        
        .hero-description p:hover {
            transform: none;
        }
        
        .contact-section {
            height: auto;
            overflow: visible;
        }
        
        .contact-header {
            padding: 1rem 1.5rem;
        }
        
        .contact-title {
            font-size: 2.5rem;
            letter-spacing: 2px;
        }
        
        .contact-content {
            padding: 1.5rem 1.5rem 1rem 1.5rem;
            overflow-y: visible;
        }
        
        .form-group:hover .form-label {
            transform: none;
        }
        
        .form-control:focus {
            transform: none;
        }
        
        .submit-btn::before {
            display: none;
        }
        
        .social-grid {
            gap: 1.2rem;
        }
        
        .social-item {
            width: 58px;
            height: 58px;
        }
        
        .social-item::before {
            display: none;
        }
        
        .social-icon {
            font-size: 1.4rem;
        }
        
        .research-header {
            padding: 1.5rem 1.5rem;
        }
        
        .research-description {
            font-size: 1rem;
            letter-spacing: 1px;
        }

        .articles-container {
            height: calc(100vh - 200px);
        }

        .articles-grid {
            grid-template-columns: 1fr;
        }
        
        .article-block {
            padding: 1.5rem;
            height: calc((100vh - 200px - 12px) / 3);
        }
        
        .article-block:hover .article-title {
            color: white;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
            transform: none;
        }
        
        .article-title {
            font-size: 1.1rem;
        }

        .article-filler {
            height: calc((100vh - 200px - 12px) / 3);
        }

        .article-filler::before {
            font-size: 1.5rem;
        }

        .coming-soon-title {
            font-size: 2rem;
        }

        .coming-soon-text {
            font-size: 1rem;
        }

        /* Notes Section Mobile */
        .notes-container {
            height: calc(100vh - 200px);
        }

        .notes-grid {
            grid-template-columns: 1fr;
            gap: 6px;
        }

        .note-category-block {
            height: calc((100vh - 200px - 18px) / 4);
            padding: 2rem;
        }

        .note-category-title {
            font-size: 1.4rem;
        }

        .note-category-block:hover .note-category-title {
            color: white;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
            transform: none;
        }

        /* Article Page Mobile Styles */
        .article-nav {
            padding: 1rem 1.5rem;
            min-height: 60px;
            gap: 0.5rem;
        }

        .article-nav h2 {
            font-size: 1.2rem;
            letter-spacing: 1px;
            padding-left: 0;
            padding-right: 0;
            white-space: normal;
            line-height: 1.2;
        }

        /* Notes Category Navigation Mobile */
        .notes-category-nav {
            padding: 1.5rem 1.5rem;
            gap: 0.5rem;
        }

        .notes-category-title-nav {
            font-size: 1.2rem;
            letter-spacing: 1px;
            padding-left: 0;
            padding-right: 0;
            white-space: normal;
            line-height: 1.2;
        }

        .back-btn {
            padding: 0.5rem;
            font-size: 1rem;
            width: 40px;
            height: 40px;
        }

        .article-body {
            padding: 0rem 0rem 0rem 0rem;
        }

        .article-body h1 {
            font-size: 1.8rem;
        }

        .article-body h2 {
            font-size: 1.4rem;
        }

        .article-body h3 {
            font-size: 1.2rem;
        }

        .article-body pre {
            font-size: 0.8rem;
            overflow-x: auto;
        }

        .loading-spinner {
            padding: 2rem;
            font-size: 1rem;
        }

        .spinner {
            width: 30px;
            height: 30px;
        }
    }
</style>
</head>
<body>
    <nav class="nav-header">
        <div class="nav-container">
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" onclick="showSection('home')"><span>About</span></a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('experience')" data-section="experience"><span>Research</span></a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('studying')" data-section="studying"><span>Notes</span></a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" onclick="showSection('ideas')" data-section="ideas"><span>Ideas</span></a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="horizontal-divider"></div>

    <div class="main-content">
        <!-- Home Section -->
        <div id="home" class="content-section active">
            <div class="home-layout">
                <div class="hero-section">
                    <div class="hero-content">
                        <h1 class="hero-title">Harsh Patel</h1>
                        <p class="hero-subtitle">AI Researcher â€¢ Building the Future</p>
                        
                        <div class="hero-description">
                            <p>Student at the <strong>University of Waterloo</strong></p>
                            <p>Seeking <strong>2026 Internships</strong></p>
                        </div>
                    </div>
                </div>

                <div class="vertical-divider"></div>

                <div class="contact-section">
                    <div class="contact-header">
                        <h2 class="contact-title">Let's Connect</h2>
                    </div>
                    <div class="contact-content">
                        <form action="https://formspree.io/f/xayvpqyz" method="POST">
                            <div class="form-group">
                                <label class="form-label" for="name">Your Name</label>
                                <input type="text" id="name" name="name" class="form-control" placeholder="Enter your full name" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="email">Email Address</label>
                                <input type="email" id="email" name="email" class="form-control" placeholder="email@domain.com" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="message">Your Message</label>
                                <textarea id="message" name="message" class="form-control" rows="5" placeholder="Have a startup idea? Want to talk about research? Let's chat!" required></textarea>
                            </div>
                            <button type="submit" class="submit-btn"><span>Send Message</span></button>
                        </form>
                        
                        <div class="social-section">
                            <div class="social-grid">
                                <a href="#" class="social-item" onclick="copyEmail(event)">
                                    <div class="social-icon">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                </a>
                                <a href="https://github.com/harshp30" class="social-item" target="_blank">
                                    <div class="social-icon">
                                        <i class="fab fa-github"></i>
                                    </div>
                                </a>
                                <a href="https://www.linkedin.com/in/hp30/" class="social-item" target="_blank">
                                    <div class="social-icon">
                                        <i class="fab fa-linkedin-in"></i>
                                    </div>
                                </a>
                                <a href="https://scholar.google.ca/citations?user=AlkDP9YAAAAJ&hl=en" class="social-item" target="_blank">
                                    <div class="social-icon">
                                        <i class="fas fa-graduation-cap"></i>
                                    </div>
                                </a>
                                <a href="https://open.spotify.com/user/31jmxokbnxj6eyw5x7uvi6eyw5x7uvi6w67kqu?si=846b2495e87143cd" class="social-item" target="_blank">
                                    <div class="social-icon">
                                        <i class="fab fa-spotify"></i>
                                    </div>
                                </a>
                                <a href="#" class="social-item" onclick="copyDiscord(event)">
                                    <div class="social-icon">
                                        <i class="fab fa-discord"></i>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Experience Section -->
        <div id="experience" class="content-section">
            <div class="research-header">
                <p class="research-description">Below are some articles related to my specialization in synthetic scene generation</p>
            </div>
            
            <div class="horizontal-divider"></div>

            <div class="articles-container">
                <div class="articles-grid">

                    <div class="article-block" onclick="openArticle('research/procedural-generation-frameworks.md')">
                        <h3 class="article-title">Procedural Generation Frameworks</h3>
                    </div>

                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                </div>
            </div>
        </div>

        <!-- Notes Section -->
        <div id="studying" class="content-section">
            <div class="research-header">
                <p class="research-description">Below are my study notes organized by subject area</p>
            </div>
            
            <div class="horizontal-divider"></div>

            <div class="notes-container">
                <div class="notes-grid">
                    <div class="note-category-block" onclick="showNotesCategory('artificial-intelligence')">
                        <h3 class="note-category-title">Artificial Intelligence</h3>
                    </div>

                    <div class="note-category-block" onclick="showNotesCategory('python')">
                        <h3 class="note-category-title">Python</h3>
                    </div>

                    <div class="note-category-block" onclick="showNotesCategory('data-structures-algorithms')">
                        <h3 class="note-category-title">Data Structures & Algorithms</h3>
                    </div>

                    <div class="note-category-block" onclick="showNotesCategory('other')">
                        <h3 class="note-category-title">Other</h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notes Categories -->
        <div id="artificial-intelligence" class="content-section">
            <div class="notes-category-nav">
                <h2 class="notes-category-title-nav">Artificial Intelligence</h2>
                <button class="back-btn" onclick="goBackToNotes()">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>
            
            <div class="horizontal-divider"></div>

            <div class="articles-container">
                <div class="articles-grid">
                    <div class="article-block" onclick="openArticle('notes/the-art-of-diffusion.md')">
                        <h3 class="article-title">The Art of Diffusion</h3>
                    </div>

                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                </div>
            </div>
        </div>

        <div id="python" class="content-section">
            <div class="notes-category-nav">
                <h2 class="notes-category-title-nav">Python</h2>
                <button class="back-btn" onclick="goBackToNotes()">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>
            
            <div class="horizontal-divider"></div>

            <div class="articles-container">
                <div class="articles-grid">
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                </div>
            </div>
        </div>

        <div id="data-structures-algorithms" class="content-section">
            <div class="notes-category-nav">
                <h2 class="notes-category-title-nav">Data Structures & Algorithms</h2>
                <button class="back-btn" onclick="goBackToNotes()">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>
            
            <div class="horizontal-divider"></div>

            <div class="articles-container">
                <div class="articles-grid">
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                </div>
            </div>
        </div>

        <div id="other" class="content-section">
            <div class="notes-category-nav">
                <h2 class="notes-category-title-nav">Other</h2>
                <button class="back-btn" onclick="goBackToNotes()">
                    <i class="fas fa-arrow-left"></i>
                </button>
            </div>
            
            <div class="horizontal-divider"></div>

            <div class="articles-container">
                <div class="articles-grid">
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                </div>
            </div>
        </div>

        <!-- Ideas Section -->
        <div id="ideas" class="content-section">
            <div class="research-header">
                <p class="research-description">Below are my project ideas and concepts in development</p>
            </div>
            
            <div class="horizontal-divider"></div>

            <div class="articles-container">
                <div class="articles-grid">
                    <div class="article-block" onclick="openArticle('ideas/distribution-of-light-through-medium.md')">
                        <h3 class="article-title">Distribution of a light through a medium</h3>
                    </div>

                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                    <div class="article-filler"></div>
                </div>
            </div>
        </div>

        <!-- Article Viewer Page -->
        <div id="article-viewer" class="content-section">
            <div class="article-page">
                <div class="article-nav">
                    <h2 id="articleTitle">Article Title</h2>
                    <button class="back-btn" onclick="goBackFromArticle()">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
                <div class="article-container">
                    <div class="article-body" id="articleBody">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                            Loading article...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="notification">Email copied to clipboard!</div>

    <script>
    // Articles will be loaded from separate JavaScript files
    // Each file adds to window.articles global object
    
    // Initialize highlight.js when page loads
    document.addEventListener('DOMContentLoaded', function() {
        // Wait for highlight.js to be available
        if (typeof hljs !== 'undefined') {
            // Configure highlight.js
            hljs.configure({
                ignoreUnescapedHTML: true,
                languages: ['python', 'javascript', 'bash', 'plaintext']
            });
            console.log('Highlight.js initialized successfully');
        } else {
            console.warn('Highlight.js not available');
        }
    });

    function showSection(sectionName) {
        // Hide all sections
        const sections = document.querySelectorAll('.content-section');
        sections.forEach(section => section.classList.remove('active'));

        // Show the selected section
        document.getElementById(sectionName).classList.add('active');

        // Update navigation only if it's not the article viewer
        if (sectionName !== 'article-viewer') {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => link.classList.remove('active'));
            
            const activeLink = document.querySelector(`[data-section="${sectionName}"]`) || 
                              document.querySelector(`[onclick="showSection('${sectionName}')"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }
        
        // Scroll to top
        window.scrollTo(0, 0);
    }

    // Article Page Functions
    let previousSection = 'experience'; // Track which section we came from
    let previousNotesSection = 'studying'; // Track which notes section we came from

    function openArticle(filePath) {
        // Store current section to return to it later
        const currentSection = document.querySelector('.content-section.active');
        if (currentSection) {
            previousSection = currentSection.id;
        }

        const articleTitle = document.getElementById('articleTitle');
        const articleBody = document.getElementById('articleBody');
        
        // Get article data from loaded JavaScript files
        const article = window.articles && window.articles[filePath];
        
        if (!article) {
            articleBody.innerHTML = `
                <div style="text-align: center; color: var(--accent-pink); padding: 3rem;">
                    <h3>Article Not Found</h3>
                    <p>The requested article could not be found.</p>
                </div>
            `;
            return;
        }
        
        // Set title and show article page
        articleTitle.textContent = article.title;
        showSection('article-viewer');
        
        // Show loading spinner briefly for smooth transition
        articleBody.innerHTML = `
            <div class="loading-spinner">
                <div class="spinner"></div>
                Loading article...
            </div>
        `;
        
        // Small delay to show loading animation
        setTimeout(() => {
            try {
                // Get markdown content from embedded data
                let markdown = article.content;
                
                // Validate that we have content
                if (!markdown || typeof markdown !== 'string') {
                    throw new Error('Invalid article content');
                }
                
                // Remove the first h1 title from markdown since we show it in the nav
                markdown = markdown.replace(/^# .+$/m, '').trim();
                
                // Ensure markdown is a string
                if (typeof markdown !== 'string') {
                    throw new Error('Article content must be a string');
                }

                // Clean up markdown content - fix escaped backticks
                markdown = markdown.replace(/\\\`\\\`\\\`/g, '```');
                
                // Configure marked with better syntax highlighting
                marked.setOptions({
                    breaks: true,
                    gfm: true,
                    highlight: function(code, lang) {
                        // Ensure code is a string
                        if (typeof code !== 'string') {
                            code = String(code || '');
                        }
                        
                        // Auto-detect language if not specified
                        let detectedLanguage = lang || 'plaintext';
                        
                        // Smart language detection based on code patterns
                        if (!lang || lang === 'plaintext') {
                            if (code.includes('import ') && (code.includes('numpy') || code.includes('def ') || code.includes('class '))) {
                                detectedLanguage = 'python';
                            } else if (code.includes('function ') || code.includes('const ') || code.includes('var ') || code.includes('=>')) {
                                detectedLanguage = 'javascript';
                            } else if (code.includes('#!/bin/bash') || code.includes('echo ') || code.includes('cd ') || code.includes('ls ')) {
                                detectedLanguage = 'bash';
                            }
                        }
                        
                        // Apply syntax highlighting with better error handling
                        if (typeof hljs !== 'undefined') {
                            try {
                                // Check if language is supported
                                if (hljs.getLanguage && hljs.getLanguage(detectedLanguage)) {
                                    const result = hljs.highlight(code, { 
                                        language: detectedLanguage,
                                        ignoreIllegals: true 
                                    });
                                    return result.value;
                                } else {
                                    // Try auto-detection if specific language fails
                                    const result = hljs.highlightAuto(code, ['python', 'javascript', 'bash']);
                                    return result.value;
                                }
                            } catch (err) {
                                console.warn('Syntax highlighting failed, using plain text:', err);
                                return hljs.highlight(code, { language: 'plaintext', ignoreIllegals: true }).value;
                            }
                        }
                        
                        // Fallback to escaped plain text
                        return code
                            .replace(/&/g, '&amp;')
                            .replace(/</g, '&lt;')
                            .replace(/>/g, '&gt;')
                            .replace(/"/g, '&quot;')
                            .replace(/'/g, '&#39;');
                    }
                });

                // Parse markdown to HTML with better error handling
                let html;
                try {
                    html = marked.parse(markdown);
                } catch (markedError) {
                    console.error('Marked.js parsing error:', markedError);
                    console.error('Markdown content length:', markdown.length);
                    console.error('Markdown content preview:', markdown.substring(0, 200));
                    
                    // Fallback to simple HTML conversion
                    html = markdown
                        .split('\n')
                        .map(line => line.startsWith('##') ? `<h2>${line.replace(/^##\s*/, '')}</h2>` : 
                                     line.startsWith('#') ? `<h3>${line.replace(/^#\s*/, '')}</h3>` : 
                                     line.trim() ? `<p>${line}</p>` : '')
                        .join('');
                }
                
                articleBody.innerHTML = html;
                
                // Post-process code blocks for smart highlighting and consistent styling
                articleBody.querySelectorAll('pre code').forEach(codeElement => {
                    const pre = codeElement.parentElement;
                    const classes = codeElement.className || '';
                    
                    // Extract language from class or detect from content
                    let language = 'plaintext';
                    const langMatch = classes.match(/language-(\w+)/);
                    if (langMatch) {
                        language = langMatch[1];
                    } else {
                        // Auto-detect language from code content
                        const code = codeElement.textContent || '';
                        if (code.includes('import ') && (code.includes('numpy') || code.includes('def ') || code.includes('class '))) {
                            language = 'python';
                        } else if (code.includes('function ') || code.includes('const ') || code.includes('var ') || code.includes('=>')) {
                            language = 'javascript';
                        } else if (code.includes('#!/bin/bash') || code.includes('echo ') || code.includes('cd ')) {
                            language = 'bash';
                        }
                    }
                    
                    // Set data attribute for CSS styling
                    pre.setAttribute('data-language', language);
                    
                    // Ensure proper classes are set for consistent highlighting
                    codeElement.classList.add('hljs');
                    codeElement.classList.add(`language-${language}`);
                    
                    // Re-highlight if necessary for consistency
                    if (typeof hljs !== 'undefined' && !codeElement.getAttribute('data-highlighted')) {
                        try {
                            if (hljs.getLanguage && hljs.getLanguage(language)) {
                                const result = hljs.highlight(codeElement.textContent, { 
                                    language: language,
                                    ignoreIllegals: true 
                                });
                                codeElement.innerHTML = result.value;
                            } else {
                                const result = hljs.highlightAuto(codeElement.textContent, ['python', 'javascript', 'bash']);
                                codeElement.innerHTML = result.value;
                            }
                            codeElement.setAttribute('data-highlighted', 'true');
                        } catch (err) {
                            console.warn('Re-highlighting failed for', language, ':', err);
                        }
                    }
                });
                
                // Re-render LaTeX math
                if (window.MathJax) {
                    MathJax.typesetPromise([articleBody]).catch(function (err) {
                        console.log('MathJax typeset error:', err.message);
                    });
                }
                
                // Scroll to top of article
                const articleContainer = document.querySelector('.article-container');
                if (articleContainer) {
                    articleContainer.scrollTop = 0;
                }
                
            } catch (error) {
                console.error('Error loading article:', error);
                articleBody.innerHTML = `
                    <div style="text-align: center; color: var(--accent-pink); padding: 3rem;">
                        <h3>Error Loading Article</h3>
                        <p>Sorry, there was an error loading the article. Please try again later.</p>
                        <p><em>Error: ${error.message}</em></p>
                    </div>
                `;
            }
        }, 200); // Small delay to show loading animation
    }

    function goBackFromArticle() {
        // Return to the previous section
        showSection(previousSection);
    }

    // Notes Category Functions
    function showNotesCategory(categoryName) {
        // Store current section to return to it later
        const currentSection = document.querySelector('.content-section.active');
        if (currentSection) {
            previousNotesSection = currentSection.id;
        }
        
        // Show the selected category
        showSection(categoryName);
        
        // Scroll to top
        window.scrollTo(0, 0);
    }

    function goBackToNotes() {
        // Return to the main notes page
        showSection(previousNotesSection);
    }

    // Keyboard navigation for article viewer and notes categories
    document.addEventListener('keydown', function(event) {
        const articleViewer = document.getElementById('article-viewer');
        const notesCategories = ['artificial-intelligence', 'python', 'data-structures-algorithms', 'other'];
        
        if (articleViewer && articleViewer.classList.contains('active')) {
            if (event.key === 'Escape') {
                goBackFromArticle();
            }
        } else if (notesCategories.some(cat => document.getElementById(cat) && document.getElementById(cat).classList.contains('active'))) {
            if (event.key === 'Escape') {
                goBackToNotes();
            }
        }
    });

    function copyEmail(event) {
        event.preventDefault();
        const email = 'h329pate@uwaterloo.ca';
        const notification = document.getElementById('notification');
        
        navigator.clipboard.writeText(email).then(() => {
            notification.textContent = 'Email copied to clipboard!';
            notification.style.display = 'block';
            setTimeout(() => notification.classList.add('show'), 10);
            
            notification.removeEventListener('click', hideNotification);
            notification.addEventListener('click', hideNotification);

            setTimeout(hideNotification, 3000);
        });
    }

    function copyDiscord(event) {
        event.preventDefault();
        const discord = 'h30p';
        const notification = document.getElementById('notification');
        
        navigator.clipboard.writeText(discord).then(() => {
            notification.textContent = 'Discord username copied to clipboard!';
            notification.style.display = 'block';
            setTimeout(() => notification.classList.add('show'), 10);
            
            notification.removeEventListener('click', hideNotification);
            notification.addEventListener('click', hideNotification);

            setTimeout(hideNotification, 3000);
        });
    }

    function hideNotification() {
        const notification = document.getElementById('notification');
        notification.classList.remove('show');
    }

    document.addEventListener('DOMContentLoaded', () => {
        const notification = document.getElementById('notification');
        notification.addEventListener('transitionend', () => {
            if (!notification.classList.contains('show')) {
                notification.style.display = 'none';
            }
        });
    });
    </script>
</body>
</html>
